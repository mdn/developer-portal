{% comment %}
Inputs:
  item: StreamBlock
  block_type: str
{% endcomment %}

{% load static %}
{% load wagtailcore_tags %}
{% load wagtailimages_tags %}
{% load app_filters %}

{% image resource.image width-480 as img %}

{% if block_type == "video" %}
  {% static "img/placeholders/video-16-9.jpg" as fallback_url %}
{% else %}
  {% static "img/placeholders/article-16-9.jpg" as fallback_url %}
{% endif %}
<section class="mzp-c-card mzp-c-card-small mzp-has-aspect-16-9">
  {% if external_page %}
    <a href="{{ resource.url }}" class="card-link" data-type="external_page" target="_blank" rel="nofollow noopener">
  {% else%}
    <a href="{% pageurl resource %}" class="card-link" data-type="{{ resource.resource_type }}">
  {% endif %}
      <div class="mzp-c-card-media-wrapper">
        <div class="lazy-image-container">
          <img class="mzp-c-card-image" src="{% firstof img.url fallback_url %}" alt="">
        </div>
      </div>
      <div class="mzp-c-card-content">
        <div class="mzp-c-card-tag">
        {% if external_page %}
          {{resource.url|domain_from_url:request }}
        {% else %}
          {% pageurl resource as page_url %}
          {{page_url|domain_from_url:request }}
        {% endif %}
        </div>
        <h2 class="mzp-c-card-title">
          <span>
            {{ resource.title }}
          </span>
        </h2>
      </div>
    </a>
</section>
