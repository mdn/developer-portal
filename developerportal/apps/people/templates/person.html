{% extends "base.html" %}
{% load static %}
{% load wagtailcore_tags %}
{% load wagtailimages_tags %}

{% block body_class %}person{% endblock %}

{% block header %}
  {% include "header.html" %}
  {% include "utils/accent-color.html" with color='#ffd567' %}
{% endblock %}

{% block content %}
  <main class="has-header">
    <div class="base-grid">
      <section class="section-full">
        {% include "organisms/pattern-bg-header.html" with title=page.title description=page.job_title icon="mozillian" %}
      </section>
      <section>
        {% include "organisms/person-overview.html" with resource=page %}
      </section>
      <section class="section-full">
        {% include "organisms/topic-links.html" with topics=page.topics.all pagetheme="person" %}
      </section>
      {% if page.articles.all %}
      <section>
        <div class="section-header">
          <h2>My latest articles</h2>
          <a href="">See more</a>
        </div>
        {% if page.articles.count == 1 %}
          {# a single article is rendered full width #}
          <div>
            {% with page.articles.all.0 as article_author %}
              {% include "molecules/cards/card.html" with resource=article_author.article show_author=True full_width=True %}
            {% endwith %}
          </div>
        {% else %}
          {# 2 or 3 are rendered side-by-side #}
          <div class="card-container {% if page.articles.count == 2 %}card-container-2-wide{% endif %}">
            {% for article_author in page.articles.all|slice:":3" %}
              {% include "molecules/cards/card.html" with resource=article_author.article show_author=True %}
            {% endfor %}
          </div>
        {% endif %}
      </section>
      {% endif %}
    </div>
  </main>
{% endblock content %}
